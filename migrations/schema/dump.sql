PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS goose_db_version (
		id INTEGER PRIMARY KEY AUTOINCREMENT,
		version_id INTEGER NOT NULL,
		is_applied INTEGER NOT NULL,
		tstamp TIMESTAMP DEFAULT (datetime('now'))
	);
INSERT INTO goose_db_version VALUES(1,0,1,'2025-06-28 02:51:26');
INSERT INTO goose_db_version VALUES(4,1,1,'2025-06-29 08:08:28');
INSERT INTO goose_db_version VALUES(5,2,1,'2025-06-29 08:08:29');
CREATE TABLE IF NOT EXISTS users (
  id TEXT PRIMARY KEY,
  created_at TEXT DEFAULT (datetime ('now', '+7 hours')),
  updated_at TEXT DEFAULT (datetime ('now', '+7 hours')),
  first_name TEXT NOT NULL,
  last_name TEXT NOT NULL,
  password TEXT NOT NULL DEFAULT '',
  email TEXT UNIQUE NOT NULL,
  phone TEXT UNIQUE NOT NULL,
  age TEXT NOT NULL DEFAULT "",
  gender TEXT NOT NULL,
  nationality TEXT NOT NULL,
  role TEXT NOT NULL DEFAULT 'participant',
  retreat_id INTEGER NOT NULL DEFAULT 0,
  check_in_date TEXT DEFAULT (datetime ('now', '+7 hours')),
  check_out_date TEXT,
  leave_date TEXT NOT NULL,
  diet TEXT,
  place TEXT NOT NULL DEFAULT 'None',
  FOREIGN KEY (role) REFERENCES roles (name) ON UPDATE CASCADE ON DELETE SET DEFAULT,
  FOREIGN KEY (retreat_id) REFERENCES retreats (id) ON UPDATE CASCADE ON DELETE SET DEFAULT,
  FOREIGN KEY (place) REFERENCES places (name) ON UPDATE CASCADE ON DELETE SET DEFAULT
);
INSERT INTO users VALUES('00000000-0000-0000-0000-000000000000','2025-06-29 15:09:35','2025-06-29 15:09:35','','',X'24326124313024637173457a474e2e714748763941734c45467032684f695a4e396b47536c444a576c637264443235484273745542416d6948314136','admin@papae.com','','','','','admin',0,'',NULL,'',NULL,'None');
INSERT INTO users VALUES('1fd83dc0-6ac5-430b-8cb8-351961592067','2025-06-29 15:11:30','2025-06-29 09:38:56','Test','Test','','test@gmail.com','0798723987','','Male','Algeria','volunteer',0,'2025-06-29 15:11:30',NULL,'2025-06-30','Vegetarian','Yellow House');
INSERT INTO users VALUES('00000000-0000-0000-0000-000000000001','2025-06-29 16:54:26','2025-06-29 16:54:26','John','Doe',X'243261243130244c6f5a484c5536774b47516d6c4335526671306b6f4f31503530746f75634735593450653972477a636d38506364506d4f706e7a32','john@papae.com','07098987876','','Male','American','volunteer',0,'',NULL,'',NULL,'None');
INSERT INTO users VALUES('00000000-0000-0000-0000-000000000002','2025-06-29 16:54:26','2025-06-29 16:54:26','Zak','Moore',X'243261243130244c6f5a484c5536774b47516d6c4335526671306b6f4f31503530746f75634735593450653972477a636d38506364506d4f706e7a32','zak@mail.com','0987234987','','Male','British','participant',0,'',NULL,'',NULL,'None');
CREATE TABLE IF NOT EXISTS retreats (
  id INTEGER PRIMARY KEY,
  retreat_code TEXT NOT NULL,
  created_at TEXT DEFAULT (datetime ('now', '+7 hours')),
  updated_at TEXT DEFAULT (datetime ('now', '+7 hours')),
  type TEXT NOT NULL CHECK (type IN ('fixed', 'flexible')),
  start_date TEXT "",
  end_date TEXT
);
INSERT INTO retreats VALUES(0,'flex','2025-06-29 15:08:29','2025-06-29 15:08:29','flexible',NULL,NULL);
INSERT INTO retreats VALUES(1,'fix-07-06','2025-06-29 15:13:14','2025-06-29 15:13:14','fixed','2025-07-06','2025-07-09');
CREATE TABLE IF NOT EXISTS roles (name TEXT PRIMARY KEY);
INSERT INTO roles VALUES('participant');
INSERT INTO roles VALUES('admin');
INSERT INTO roles VALUES('volunteer');
CREATE TABLE IF NOT EXISTS refresh_tokens (
  token TEXT PRIMARY KEY,
  created_at TEXT DEFAULT (datetime ('now', '+7 hours')),
  updated_at TEXT DEFAULT (datetime ('now', '+7 hours')),
  revoked_at TEXT,
  user_id TEXT NOT NULL,
  expires_at TEXT NOT NULL,
  FOREIGN KEY (user_id) REFERENCES users (id)
);
INSERT INTO refresh_tokens VALUES('dc3f45448fbc83f7f3971bb354a5d7d450e499e2a2138f60619d4bf3962a26fa','2025-06-29 15:10:02','2025-06-29 15:10:02',NULL,'00000000-0000-0000-0000-000000000000','2025-07-29 08:10:02.504351459 +0000 UTC m=+2592027.632427130');
INSERT INTO refresh_tokens VALUES('7557ac4a0754d48bb659f97d4cfa2345435291a95c5777a1e42746d085b25dc9','2025-06-29 15:11:07','2025-06-29 15:11:07',NULL,'00000000-0000-0000-0000-000000000000','2025-07-29 08:11:07.161895061 +0000 UTC m=+2592092.289970722');
INSERT INTO refresh_tokens VALUES('9c80bf27d664e4ab0db643473c4519691821c515032766b65a846a8c5054a312','2025-06-29 15:28:55','2025-06-29 15:28:55',NULL,'00000000-0000-0000-0000-000000000000','2025-07-29 08:28:55.266996761 +0000 UTC m=+2593160.395072423');
INSERT INTO refresh_tokens VALUES('6ff50ee66273f5feeab80f81cc1ccd00817c553fa931399057b9fd60f6057702','2025-06-29 15:31:20','2025-06-29 15:31:20',NULL,'00000000-0000-0000-0000-000000000000','2025-07-29 08:31:20.936518141 +0000 UTC m=+2593306.064593803');
INSERT INTO refresh_tokens VALUES('f26d70dec7ff15b77e66e7eae80899b686bbe2feb0d2875736dba08f41f1756c','2025-06-29 16:14:40','2025-06-29 16:14:40',NULL,'00000000-0000-0000-0000-000000000000','2025-07-29 09:14:40.731973376 +0000 UTC m=+2595905.860049037');
INSERT INTO refresh_tokens VALUES('5f38563dfa4d3f8381988f041f5ba54f5d1cd58db22ddd81af01935f40869b87','2025-06-29 16:37:35','2025-06-29 16:37:35',NULL,'00000000-0000-0000-0000-000000000000','2025-07-29 09:37:35.12217159 +0000 UTC m=+2597280.250247251');
CREATE TABLE IF NOT EXISTS places (
  name TEXT PRIMARY KEY,
  capacity INTEGER NOT NULL DEFAULT 0
);
INSERT INTO places VALUES('None',0);
INSERT INTO places VALUES('Yellow House',10);
INSERT INTO places VALUES('George House',10);
INSERT INTO places VALUES('Center Hall',10);
INSERT INTO places VALUES('DOM',20);
INSERT INTO places VALUES('Metta House',10);
INSERT INTO places VALUES('Sie House',10);
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES('goose_db_version',5);
COMMIT;
